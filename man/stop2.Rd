% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/stop2.R
\name{stop2}
\alias{stop2}
\title{Stop with Better Error Messages}
\usage{
stop2(message, ..., .envir = parent.frame(), class = NULL)
}
\arguments{
\item{message}{An error message string. Can include string interpolation
using \code{{variable}} syntax which will be evaluated in \code{.envir}.}

\item{...}{Additional arguments passed to the error function.}

\item{.envir}{Environment for string interpolation. Defaults to parent frame.}

\item{class}{Character vector of error classes (for cli and rlang).}
}
\value{
This function does not return; it stops execution with an error.
}
\description{
A helper function that uses the best available error handling method.
Tries to use \code{cli::cli_abort()} for rich formatting, falls back to
\code{rlang::abort()} for better error handling, and ultimately uses base
\code{stop()} if neither is available.
}
\details{
This function implements a fallback mechanism for error handling:
\itemize{
\item{If \pkg{cli} is available, uses \code{\link[cli]{cli_abort}}
for rich, formatted error messages with color, styling support, and
native string interpolation.}
\item{If \pkg{cli} is not available but \pkg{rlang} is, uses
\code{\link[rlang]{abort}} for structured error objects with better
error handling capabilities.}
\item{If neither package is available, falls back to base R's
\code{\link[base]{stop}} with \code{call. = FALSE} to follow tidyverse
style conventions.}
}

String interpolation with \code{{variable}} syntax is always supported:
\itemize{
\item{If \pkg{cli} is available, full cli interpolation and formatting
features are used (including \code{{.val}}, \code{{.field}}, etc.).}
\item{If \pkg{cli} is not available but \pkg{glue} is, glue's interpolation
engine is used, supporting \code{{{{literal}}}} escaping.}
\item{If neither package is available, a simple fallback interpolation
handles basic \code{{expression}} syntax. This fallback does not support
advanced features like \code{{{{literal}}}} escaping for literal braces,
or cli's special formatting syntax.}
}
}
\examples{
\dontrun{
# Basic usage
stop2("Something went wrong")

# With variable interpolation (works regardless of installed packages)
x <- 5
stop2("Expected value < 3, got {x}")

# With expression interpolation
df <- data.frame(a = 1:3)
stop2("Expected 5 rows, got {nrow(df)}")

# With multiple interpolations
expected <- 10
actual <- 5
stop2("Expected {expected}, got {actual}")

# With custom error class
stop2("Invalid input", class = "invalid_input_error")
}

}
\seealso{
\code{\link[cli]{cli_abort}}, \code{\link[rlang]{abort}},
\code{\link[base]{stop}}
}
