---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

# fmisc

<!-- badges: start -->
[![R-CMD-check](https://github.com/fabiandistler/fmisc/actions/workflows/R-CMD-check.yaml/badge.svg)](https://github.com/fabiandistler/fmisc/actions/workflows/R-CMD-check.yaml)
<!-- badges: end -->

Various utilities for software development in R, including smart parallel processing, chunking algorithms, and custom linting rules.

## Installation

You can install the development version of fmisc from [GitHub](https://github.com/) with:

``` r
# install.packages("pak")
pak::pak("fabiandistler/fmisc")
```

## Development Tools

### Function Template

Create new R functions from a comprehensive best-practices template:

```r
library(fmisc)

# Create a new function file with tidyverse-style template
use_function_template("my_function")
```

The template includes:

- Roxygen2 documentation patterns
- Argument ordering checklist (data → descriptors → ... → details)
- Multiple validation options (stopifnot, cli, rlang, checkmate)
- Dots handling patterns
- Error handling with custom error constructors
- Design principles checklist

### Makefile for R Packages

Add a comprehensive Makefile for package development:

```r
# Add Makefile with common targets
use_make2()

# Then use make commands in your terminal
# make all      - document, build, and check
# make test     - run tests
# make help     - see all available targets
```

## Code Quality Tools

### Custom Linting Rules

`fmisc` provides custom linting rules for both **lintr** and **flir** packages:

#### Using lintr Custom Linters

```r
library(lintr)
library(fmisc)

# Use individual linters
lint("my_script.R", linters = todo_fixme_linter())

# Combine with default linters
lint("my_script.R", linters = c(
  linters_with_defaults(),
  todo_fixme_linter(),
  deprecated_function_linter()
))
```

Available linters:
- `todo_fixme_linter()`: Identifies TODO, FIXME, XXX, and HACK comments
- `deprecated_function_linter()`: Detects deprecated R functions (e.g., `sapply()`, `require()`)

#### Using flir Custom Rules

```r
library(flir)

# Set up flir in your project
setup_flir()

# Edit flir/config.yml and add:
# from-package:
#   - fmisc

# Check and fix your code
lint_dir()
fix_dir()
```

Available flir rules:
- Replace `T`/`F` with `TRUE`/`FALSE`
- Update `sample_n()`/`sample_frac()` to `slice_sample()`
- Replace `1:length(x)` with `seq_along(x)`

